"use strict";(self.webpackChunkmongodb_memory_server_website=self.webpackChunkmongodb_memory_server_website||[]).push([[452],{3648:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"guides/error-warning-details","title":"Details for Errors & Warnings","description":"StateError","source":"@site/../docs/guides/error-warning-details.md","sourceDirName":"guides","slug":"/guides/error-warning-details","permalink":"/mongodb-memory-server/docs/guides/error-warning-details","draft":false,"unlisted":false,"editUrl":"https://github.com/typegoose/mongodb-memory-server/edit/master/docs/../docs/guides/error-warning-details.md","tags":[],"version":"current","frontMatter":{"id":"error-warning-details","title":"Details for Errors & Warnings"},"sidebar":"guides","previous":{"title":"Known Issues","permalink":"/mongodb-memory-server/docs/guides/known-issues"},"next":{"title":"Mongodb Server Versions","permalink":"/mongodb-memory-server/docs/guides/mongodb-server-versions"}}');var i=n(4848),o=n(8453);const t={id:"error-warning-details",title:"Details for Errors & Warnings"},d=void 0,l={},c=[{value:"StateError",id:"stateerror",level:2},{value:"UnknownLockfileStatusError",id:"unknownlockfilestatuserror",level:2},{value:"UnableToUnlockLockfileError",id:"unabletounlocklockfileerror",level:2},{value:"UnknownArchitectureError",id:"unknownarchitectureerror",level:2},{value:"UnknownPlatformError",id:"unknownplatformerror",level:2},{value:"WaitForPrimaryTimeoutError",id:"waitforprimarytimeouterror",level:2},{value:"EnsureInstanceError",id:"ensureinstanceerror",level:2},{value:"NoSystemBinaryFoundError",id:"nosystembinaryfounderror",level:2},{value:"Md5CheckFailedError",id:"md5checkfailederror",level:2},{value:"StartBinaryFailedError",id:"startbinaryfailederror",level:2},{value:"InstanceInfoError",id:"instanceinfoerror",level:2},{value:"KeyFileMissingError",id:"keyfilemissingerror",level:2},{value:"AuthNotObjectError",id:"authnotobjecterror",level:2},{value:"InsufficientPermissionsError",id:"insufficientpermissionserror",level:2},{value:"BinaryNotFoundError",id:"binarynotfounderror",level:2},{value:"AssertionFallbackError",id:"assertionfallbackerror",level:2},{value:"ReplsetCountLowError",id:"replsetcountlowerror",level:2},{value:"UnknownLinuxDistro",id:"unknownlinuxdistro",level:2},{value:"Deprecation Codes",id:"deprecation-codes",level:2},{value:"MMS001",id:"mms001",level:3},{value:"MMS002",id:"mms002",level:3}];function a(e){const r={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h2,{id:"stateerror",children:"StateError"}),"\n",(0,i.jsx)(r.p,{children:"Example:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-txt",children:'Incorrect State for operation: "${gotState}", allowed States: "[${wantedStates.join(\',\')}]"\nThis may be because of using a v6.x way of calling functions, look at the following guide if anything applies:\nhttps://typegoose.github.io/mongodb-memory-server/docs/guides/migration/migrate7#no-function-other-than-start-create-ensureinstance-will-be-starting-anything\n'})}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","This Error gets thrown if an function (or setter) is called, but the state is not what it should be.",(0,i.jsx)(r.br,{}),"\n","(like calling start again after already being started - or changing options while running)"]}),"\n",(0,i.jsx)(r.h2,{id:"unknownlockfilestatuserror",children:"UnknownLockfileStatusError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'Unknown LockFile Status: "${status}"'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","This Error gets thrown if an number outside the ",(0,i.jsx)(r.code,{children:"LockFileStatus"})," Enum is used"]}),"\n",(0,i.jsx)(r.h2,{id:"unabletounlocklockfileerror",children:"UnableToUnlockLockfileError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:"Cannot unlock file \"${file}\", because it is not locked by this ${thisInstance ? 'instance' : 'process'}"})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","This Error gets thrown when this package cannot get what platform it is running on"]}),"\n",(0,i.jsx)(r.h2,{id:"unknownarchitectureerror",children:"UnknownArchitectureError"}),"\n",(0,i.jsx)(r.p,{children:"Example:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:'Unsupported Architecture-Platform combination: arch: "${arch}", platform: "${platform}"'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:'Unsupported Architecture: "${arch}"'})}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","This Error gets thrown when this package runs on an unsupported architecture by mongodb"]}),"\n",(0,i.jsx)(r.h2,{id:"unknownplatformerror",children:"UnknownPlatformError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'Unknown Platform: "${platform}"'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","The Platform ",(0,i.jsx)(r.code,{children:"${platform}"})," is not supported, only supported platform currently are:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"osx"})}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"win32"})," / ",(0,i.jsx)(r.code,{children:"windows"})]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"linux"})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"waitforprimarytimeouterror",children:"WaitForPrimaryTimeoutError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'Timed out after ${timeout}ms while waiting for a Primary (where: "${where}")'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Waiting for a Primary has timedout, this originates from 4 common issues:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Starting instances failed"}),"\n",(0,i.jsx)(r.li,{children:"A even number of instances started and are unable to elect a Primary"}),"\n",(0,i.jsx)(r.li,{children:"Internal Problem"}),"\n",(0,i.jsx)(r.li,{children:"Target System is too slow to start the number of instances"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Default Timeout: ",(0,i.jsx)(r.code,{children:"1000 * 30"})," (30 seconds)"]}),"\n",(0,i.jsx)(r.h2,{id:"ensureinstanceerror",children:"EnsureInstanceError"}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsxs)(r.p,{children:["Merged into ",(0,i.jsx)(r.a,{href:"#instanceinfoerror",children:(0,i.jsx)(r.code,{children:"InstanceInfoError"})})," in 9.0.0"]})}),"\n",(0,i.jsx)(r.p,{children:"Example:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:'${baseMesasge} state was "running" but "instanceInfo" was undefined!'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:'${baseMesasge} "instanceInfo" was undefined after running "start"'})}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Details:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["First Error Message gets thrown when ",(0,i.jsx)(r.code,{children:"ensureInstance"})," is called and the ",(0,i.jsx)(r.code,{children:"state"})," is ",(0,i.jsx)(r.code,{children:"running"}),", but somehow ",(0,i.jsx)(r.code,{children:"instanceInfo"})," is ",(0,i.jsx)(r.code,{children:"undefined"})]}),"\n",(0,i.jsxs)(r.li,{children:["Second Error Message gets thrown when ",(0,i.jsx)(r.code,{children:"ensureInstance"})," is called and after ",(0,i.jsx)(r.code,{children:"start"})," was called by ",(0,i.jsx)(r.code,{children:"ensureInstance"})," and ",(0,i.jsx)(r.code,{children:"instanceInfo"})," is still ",(0,i.jsx)(r.code,{children:"undefined"})]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"In any case this Error gets thrown, it means that some internal problem happened that was not handled with another Error, please report if your get this error and did not mock anything."}),"\n",(0,i.jsxs)(r.p,{children:["Also see ",(0,i.jsx)(r.a,{href:"#instanceinfoerror",children:(0,i.jsx)(r.code,{children:"InstanceInfoError"})}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"nosystembinaryfounderror",children:"NoSystemBinaryFoundError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'Config option "SYSTEM_BINARY" was provided with value "${binaryPath}", but no binary could be found!'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Config Options ",(0,i.jsx)(r.a,{href:"../api/config-options#system_binary",children:(0,i.jsx)(r.code,{children:"SYSTEM_BINARY"})})," was set, but no binary could be found at the path ",(0,i.jsx)(r.code,{children:"${binaryPath}"}),".\nLikely causes are:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"No Binary Exists at the specified path"}),"\n",(0,i.jsxs)(r.li,{children:["The Binary is does not have the necessary permissions and is so ignored (required permissions are ",(0,i.jsx)(r.code,{children:"fs.constants.X_OK"})," (",(0,i.jsx)(r.code,{children:"--x"}),"))"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Also see:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#insufficientpermissionserror",children:(0,i.jsx)(r.code,{children:"InsufficientPermissionsError"})})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#binarynotfounderror",children:(0,i.jsx)(r.code,{children:"BinaryNotFoundError"})})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"md5checkfailederror",children:"Md5CheckFailedError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'MD5 check failed! Binary MD5 is "${binarymd5}", Checkfile MD5 is "${checkfilemd5}"'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Download MD5 check was enabled (",(0,i.jsx)(r.a,{href:"../api/config-options#md5_check",children:(0,i.jsx)(r.code,{children:"MD5_CHECK"})}),") but failed, listing the local file md5 as ",(0,i.jsx)(r.code,{children:"${binarymd5}"})," and the downloaded md5 as ",(0,i.jsx)(r.code,{children:"${checkfilemd5}"})]}),"\n",(0,i.jsx)(r.h2,{id:"startbinaryfailederror",children:"StartBinaryFailedError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'Starting the Binary Failed (PID is undefined)! Binary: "${binary}"'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Trying to start the binary ",(0,i.jsx)(r.code,{children:"${binary}"})," as a childprocess somehow failed by having property ",(0,i.jsx)(r.code,{children:"pid"})," being ",(0,i.jsx)(r.code,{children:"undefined"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Enable ",(0,i.jsx)(r.a,{href:"./enable-debug-mode",children:"Debug Mode"})," for more information."]}),"\n",(0,i.jsx)(r.h2,{id:"instanceinfoerror",children:"InstanceInfoError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'"instanceInfo" was undefined when expected to be defined! (where: "${where}")'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.code,{children:"instanceInfo"})," was ",(0,i.jsx)(r.code,{children:"undefined"})," when it was expected to have been defined previously. Please Report if this error gets thrown."]}),"\n",(0,i.jsxs)(r.p,{children:["Enable ",(0,i.jsx)(r.a,{href:"./enable-debug-mode",children:"Debug Mode"})," for more information."]}),"\n",(0,i.jsx)(r.h2,{id:"keyfilemissingerror",children:"KeyFileMissingError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'"keyfileLocation" was undefined when expected!'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Option ",(0,i.jsx)(r.code,{children:"keyfileLocation"})," was ",(0,i.jsx)(r.code,{children:"undefined"})," when it was needed. This Options is required when starting a ",(0,i.jsx)(r.code,{children:"MongoInstance"})," and option ",(0,i.jsx)(r.code,{children:"replSet"})," and ",(0,i.jsx)(r.code,{children:"auth"})," are set."]}),"\n",(0,i.jsx)(r.h2,{id:"authnotobjecterror",children:"AuthNotObjectError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'"auth" was not a object when it was expected!'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Property ",(0,i.jsx)(r.code,{children:"auth"})," was expect to be of type ",(0,i.jsx)(r.code,{children:"object"})," (transform happens in the setter for ",(0,i.jsx)(r.code,{children:"replSetOpts"}),"). Please Report if this error gets thrown."]}),"\n",(0,i.jsx)(r.h2,{id:"insufficientpermissionserror",children:"InsufficientPermissionsError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'File "${path}" does not have the required Permissions, required Permissions: "--x"'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Binary Check was conducted and found that the specified file ",(0,i.jsx)(r.code,{children:"${path}"})," exists, but does not have the required permissions, required permissions are ",(0,i.jsx)(r.code,{children:"fs.constants.X_OK"})," (",(0,i.jsx)(r.code,{children:"--x"}),")."]}),"\n",(0,i.jsx)(r.h2,{id:"binarynotfounderror",children:"BinaryNotFoundError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'No Binary at path "${path}" was found! (ENOENT)'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","Binary Check was conducted and found that the specified file ",(0,i.jsx)(r.code,{children:"${path}"})," did not exist (",(0,i.jsx)(r.code,{children:"ENOENT"}),"), this may be a result of:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"The Binary Download failed without throwing another Error"}),"\n",(0,i.jsx)(r.li,{children:"The Path generation had a problem"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"assertionfallbackerror",children:"AssertionFallbackError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:"Assert failed - no custom error"})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","This Error gets thrown when no custom error to ",(0,i.jsx)(r.code,{children:"assertion"})," is given, this should never happen"]}),"\n",(0,i.jsx)(r.h2,{id:"replsetcountlowerror",children:"ReplsetCountLowError"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:'ReplSet Count needs to be 1 or higher! (specified count: "${count}")'})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","ReplSet count (like ",(0,i.jsx)(r.code,{children:"new MongoMemoryReplSet({ replSet: { count: 0 } })"}),") needs to be ",(0,i.jsx)(r.code,{children:"1"})," or higher"]}),"\n",(0,i.jsx)(r.h2,{id:"unknownlinuxdistro",children:"UnknownLinuxDistro"}),"\n",(0,i.jsxs)(r.p,{children:["Example: ",(0,i.jsx)(r.code,{children:"Unknown/unsupported linux \"${distro}\" id_like's: [${id_like?.join(', ')}]"})]}),"\n",(0,i.jsxs)(r.p,{children:["Details:",(0,i.jsx)(r.br,{}),"\n","The Linux distro in use does not have a mapping for a mongodb version, please report this issue if the distro / idlike is not mentioned in ",(0,i.jsx)(r.a,{href:"/mongodb-memory-server/docs/guides/supported-systems",children:"Supported Systems"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"deprecation-codes",children:"Deprecation Codes"}),"\n",(0,i.jsx)(r.h3,{id:"mms001",children:"MMS001"}),"\n",(0,i.jsxs)(r.p,{children:["Code: ",(0,i.jsx)(r.code,{children:"MMS001"}),(0,i.jsx)(r.br,{}),"\n","Message: ",(0,i.jsx)(r.code,{children:"mongodb-memory-server will fully drop support for ia32 in 9.0"})]}),"\n",(0,i.jsxs)(r.p,{children:["In the major version ",(0,i.jsx)(r.code,{children:"9.0"})," MMS will fully drop support for the architecture ",(0,i.jsx)(r.code,{children:"ia32"})," (",(0,i.jsx)(r.code,{children:"i386"})," / ",(0,i.jsx)(r.code,{children:"i686"}),"), because MongoDB stopped supporting the architecture past 3.x, and MMS never full supported 3.6 or lower anyway, see ",(0,i.jsx)(r.a,{href:"https://github.com/typegoose/mongodb-memory-server/issues/638",children:"#638 for tracking"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"mms002",children:"MMS002"}),"\n",(0,i.jsxs)(r.p,{children:["Code: ",(0,i.jsx)(r.code,{children:"MMS002"}),(0,i.jsx)(r.br,{}),"\n","Message: ",(0,i.jsx)(r.code,{children:"mongodb-memory-server will fully drop support for sunos in 9.0"})]}),"\n",(0,i.jsxs)(r.p,{children:["In the major version ",(0,i.jsx)(r.code,{children:"9.0"})," MMS will fully drop support for the platfrom ",(0,i.jsx)(r.code,{children:"sunos"}),", because MMS never actually supported ",(0,i.jsx)(r.code,{children:"sunos"})," in the first place and Mongodb has stopped providing builds after ~3.4, see ",(0,i.jsx)(r.a,{href:"https://github.com/typegoose/mongodb-memory-server/issues/661",children:"#661 for tracking"}),"."]})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>d});var s=n(6540);const i={},o=s.createContext(i);function t(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);