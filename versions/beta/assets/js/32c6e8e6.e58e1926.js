"use strict";(self.webpackChunkmongodb_memory_server_website=self.webpackChunkmongodb_memory_server_website||[]).push([[353],{5235:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>m,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"guides/migration/migrate10","title":"Migrate to version 10.0.0","description":"Here are the Important changes made for 10.0.0","source":"@site/../docs/guides/migration/migrate10.md","sourceDirName":"guides/migration","slug":"/guides/migration/migrate10","permalink":"/mongodb-memory-server/versions/beta/docs/guides/migration/migrate10","draft":false,"unlisted":false,"editUrl":"https://github.com/typegoose/mongodb-memory-server/edit/master/docs/../docs/guides/migration/migrate10.md","tags":[],"version":"current","frontMatter":{"id":"migrate10","title":"Migrate to version 10.0.0"},"sidebar":"guides","previous":{"title":"Common Issues","permalink":"/mongodb-memory-server/versions/beta/docs/guides/common-issues"},"next":{"title":"Migrate to version 9.0.0","permalink":"/mongodb-memory-server/versions/beta/docs/guides/migration/migrate9"}}');var r=o(4848),s=o(8453);const t={id:"migrate10",title:"Migrate to version 10.0.0"},d=void 0,a={},l=[{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"Minimal NodeJS version is now <code>16</code>",id:"minimal-nodejs-version-is-now-16",level:3},{value:"Mongodb Driver Version upgraded to 6.x",id:"mongodb-driver-version-upgraded-to-6x",level:3},{value:"Default binary version is now 7.x",id:"default-binary-version-is-now-7x",level:3},{value:"Non-Breaking changes / Additions",id:"non-breaking-changes--additions",level:2},{value:"Compiler target is now <code>es2021</code>",id:"compiler-target-is-now-es2021",level:3},{value:"Getport now uses <code>net0listen</code> by default",id:"getport-now-uses-net0listen-by-default",level:3},{value:"Allow setting port generation in MongoMemoryServer",id:"allow-setting-port-generation-in-mongomemoryserver",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Here are the Important changes made for 10.0.0"}),"\n",(0,r.jsx)(n.admonition,{title:"Important, Read this first",type:"warning",children:(0,r.jsxs)(n.p,{children:["This Guide is written for migration from version ",(0,r.jsx)(n.code,{children:"9.4.1"})," to ",(0,r.jsx)(n.code,{children:"10.0.0"}),", for versions ",(0,r.jsx)(n.code,{children:">10.0.0 <11.0.0"}),", please consult the ",(0,r.jsx)(n.a,{href:"https://github.com/typegoose/mongodb-memory-server/blob/master/CHANGELOG.md",children:"CHANGELOG"})]})}),"\n",(0,r.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,r.jsxs)(n.h3,{id:"minimal-nodejs-version-is-now-16",children:["Minimal NodeJS version is now ",(0,r.jsx)(n.code,{children:"16"})]}),"\n",(0,r.jsxs)(n.p,{children:["With 10.0.0 the minimal nodejs required is ",(0,r.jsx)(n.code,{children:"16.20.1"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"mongodb-driver-version-upgraded-to-6x",children:"Mongodb Driver Version upgraded to 6.x"}),"\n",(0,r.jsxs)(n.p,{children:["The used MongoDB Driver version is now ",(0,r.jsx)(n.code,{children:"6.7.0"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"default-binary-version-is-now-7x",children:"Default binary version is now 7.x"}),"\n",(0,r.jsxs)(n.p,{children:["The default binary version has been upgraded from ",(0,r.jsx)(n.code,{children:"6.0.x"})," to ",(0,r.jsx)(n.code,{children:"7.0.x"}),". For more specifics see ",(0,r.jsx)(n.a,{href:"/mongodb-memory-server/versions/beta/docs/guides/mongodb-server-versions",children:"mongodb-server-versions"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:["In mongodb ",(0,r.jsx)(n.code,{children:"7.0.0"})," storage engine ",(0,r.jsx)(n.code,{children:"ephemeralForTest"})," has been removed, mongodb-memory-server will automatically translate any occurrence to ",(0,r.jsx)(n.code,{children:"wiredTiger"})," with a warning."]}),(0,r.jsxs)(n.p,{children:["It is recommended to run the tests against a tmpfs or equivalent (default ",(0,r.jsx)(n.code,{children:"/tmp"})," on linux / macos)."]})]}),"\n",(0,r.jsx)(n.h2,{id:"non-breaking-changes--additions",children:"Non-Breaking changes / Additions"}),"\n",(0,r.jsxs)(n.h3,{id:"compiler-target-is-now-es2021",children:["Compiler target is now ",(0,r.jsx)(n.code,{children:"es2021"})]}),"\n",(0,r.jsxs)(n.p,{children:["The tsconfig ",(0,r.jsx)(n.code,{children:"target"})," option has been updated to ",(0,r.jsx)(n.code,{children:"es2021"}),", which will result in less polyfills.\nThis should be a non-breaking change."]}),"\n",(0,r.jsxs)(n.h3,{id:"getport-now-uses-net0listen-by-default",children:["Getport now uses ",(0,r.jsx)(n.code,{children:"net0listen"})," by default"]}),"\n",(0,r.jsxs)(n.p,{children:["This means a port is now generated by the engine (like nodejs) itself, previously known as ",(0,r.jsx)(n.code,{children:"EXP_NET0LISTEN"}),".\nThis should reduce amount of ",(0,r.jsx)(n.code,{children:"Max port tries exceeded"})," errors."]}),"\n",(0,r.jsx)(n.h3,{id:"allow-setting-port-generation-in-mongomemoryserver",children:"Allow setting port generation in MongoMemoryServer"}),"\n",(0,r.jsxs)(n.p,{children:["Starting with 10.0 there is a new option to set whether port generation is enabled or not on ",(0,r.jsx)(n.code,{children:"MongoMemoryServer"})," called ",(0,r.jsx)(n.code,{children:"portGeneration"}),". (default: ",(0,r.jsx)(n.code,{children:"true"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["(Note that the ",(0,r.jsx)(n.code,{children:"forceSamePort"})," parameter in ",(0,r.jsx)(n.code,{children:".start"})," will overwrite this option)"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>d});var i=o(6540);const r={},s=i.createContext(r);function t(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);